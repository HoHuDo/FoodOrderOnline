@model IEnumerable<FoodOrderOnline.ViewModels.DanhMucMonAnVM>
@{
    // Lấy danh sách ID đã chọn mà ViewComponent bơm vào
    var selectedIds = (IEnumerable<int>)(ViewBag.SelectedIds ?? Enumerable.Empty<int>());
    bool checkAll = !selectedIds.Any(); // Nếu không truyền gì thì mặc định chọn "Tất cả"
}

<div class="custom-control custom-checkbox d-flex align-items-center justify-content-between mb-3">
    <input type="checkbox"
           class="custom-control-input dm-checkbox"
           id="dm-all"
           value="all" @(checkAll ? "checked" : "") />
    <label class="custom-control-label" for="dm-all">Tất cả</label>
</div>

@foreach (var dm in Model)
{
    var isChecked = selectedIds.Contains(dm.MaDm);
    <div class="custom-control custom-checkbox d-flex align-items-center justify-content-between mb-3">
        <input type="checkbox"
               class="custom-control-input dm-checkbox"
               id="dm-@dm.MaDm"
               value="@dm.MaDm" @(isChecked ? "checked" : "") />
        <label class="custom-control-label" for="dm-@dm.MaDm">@dm.TenDm</label>
        @* <span class="badge border font-weight-normal">@dm.MonAns.Count()</span> *@
    </div>
}
